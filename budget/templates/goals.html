{% extends "budget_base.html" %}
{% load staticfiles %}
{% block extrajs %}
  <script src="{% static 'js/goals.js' %}"></script>
  <script src="{% static 'js/filtercards.js' %}"></script>
{% endblock %}
{% load material_form %}
{% block title %}Goals{% endblock %}
{% block content %}
  <div class="row">
    <div id="admin" class="col s12">
      <div class="card material-table">
        <div class="card-content">
          <div class="table-header">
            <h4 class="">My Goals</h4>
            <div class="actions">
              {% if goals|length >= 1 %}
                <div id="filter_input" class="input-field">
                  <select id="filter_list" class="col m12">
                    <option value="" disabled selected>Filter goals</option>
                    <option value="all" id="button" class="filter" data-filter="all" role="button">All</option>
                    <option value="Savings" id="button" class="filter" data-filter="Savings" role="button">Savings</option>
                    <option value="Budget" id="button" class="filter" data-filter="Budget" role="button">Budget</option>
                  </select>
                </div>
              {% endif %}
              <a href="#"
                class="waves-effect waves-green accent-4 btn-flat green nopadding tooltipped btnAddGoals"
                data-position="bottom" data-delay="50" data-tooltip="Add goal">
                <i class="white-text material-icons">add</i>
              </a>
            </div>
          </div>
          <div class="row boxes" id="sort-me">
            <div class="col s12 m6 l6 mix">
              <div class="card small grey">
                <div class="card-content white-text">
                  <span class="card-title">Add New Goal</span>
                  <p>Create a goal and start saving!</p>
                </div>
                <div class="card-action grey darken-1">
                  <a class="btnAddGoals">
                    Add Goal
                  </a>
                </div>
              </div>
            </div>
            {% for goal in goals %}
              <div class="col s12 m6 l6 mix {{ goal.goal_type }}" data-category="{{ goal.goal_type }}">
                <div class="card small
                  {% if goal.goal_type == 'Budget' %}
                    purple lighten-3
                  {% elif goal.goal_type == 'Savings' %}
                    cyan lighten-3
                  {% endif %}">
                  <div class="card-content white-text">
                    <span class="card-title activator">{{ goal.goal_name }}<i class="material-icons right">more_vert</i></span>
                    <span class="card_subtitle">
                      ${{ goal.amount }}
                      <span class="right">{{ goal.goal_date }}</span>
                    </span>
                  </div>
                  <div class="card-action grey darken-3">
                    <a id='{{ goal.id }}' class='btnEditGoal white-text'>
                      Edit Goal
                    </a>
                    <a id='{{ goal.id }}' class='btnConfirmGoal white-text'>
                      Remove Goal
                    </a>
                  </div>
                  <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4">{{ goal.goal_name }}<i class="material-icons right">close</i></span>
                    {% if goal.description %}
                      <p>{{ goal.description }}</p>
                    {% else %}
                      <p>
                        It looks like you haven't entered any more information about this goal.
                         Add more information in the
                         <a id="{{ goal.id }}" class="btnEditGoal" style="cursor: pointer">Notes</a>
                         section to help keep yourself motivated!
                       </p>
                    {% endif %}
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
